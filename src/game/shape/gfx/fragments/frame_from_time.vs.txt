struct frameIndices {
    int index1;
    int index2;
    float t;
};

// num_animation_frames must be set
frameIndices get_frame_indices() {
    float time = animation_data.x;
    frameIndices indices;

    float max = frames[num_animation_frames - 1].data[0];
    float current_t = mod(time, max); 
    for (int i = 0; i < num_animation_frames - 1; i++) {
        if (frames[i].data[0] > current_t) {
            indices.index1 = i;
            break;
        }
    }
    indices.index2 = indices.index1 + 1;

    if (indices.index2 >= num_animation_frames) {
        indices.index2 = 0;
    }
    indices.t = mod(time, 1.0);

    return indices;
}